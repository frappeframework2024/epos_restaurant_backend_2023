[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"recent-sale-order\">Recent Sale Order</div>",
  "modified": "2023-09-08 15:30:49.505002",
  "name": "Recent Sale Order",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser(); // create a DOMParser object\r\n \r\n\t\t\t\r\nfrappe.db.get_list('Sale', {\r\n    fields: ['name','posting_date', 'customer','grand_total'],\r\n    limit:10,\r\n    order_by:\"creation desc\"\r\n    \r\n}).then(data => {\r\n    let table    = document.createElement(\"table\");\r\n    let tbody = document.createElement(\"tbody\");\r\n    let tr = document.createElement(\"tr\");\r\n    let th = document.createElement(\"th\");\r\n    let td = document.createElement(\"td\");\r\n    \r\n    th.innerHTML = \"Sale No\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Posting Date\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Amount\" \r\n    tr.appendChild(th)\r\n    \r\n    \r\n    tbody.appendChild(tr)\r\n\r\n    \r\n    data.forEach((r)=>{\r\n        //sale number\r\n        tr = document.createElement(\"tr\");\r\n        td = document.createElement(\"td\");\r\n        td.textContent  = r.name;\r\n        tr.appendChild(td)\r\n        //sale date\r\n\r\n        td = document.createElement(\"td\");\r\n        td.textContent =frappe.format( r.posting_date,{fieldtype:\"Date\"});\r\n        tr.appendChild(td)\r\n        \r\n        //amount\r\n        td = document.createElement(\"td\");\r\n        td.appendChild(parser.parseFromString(frappe.format( r.grand_total,{fieldtype:\"Currency\"}), \"text/html\").querySelector(\"div\"));\r\n        tr.appendChild(td)\r\n        \r\n        tr.addEventListener('click', function() {\r\n        \r\n            frappe.set_route('Form', 'Sale',r.name)\r\n        });\r\n\r\n        tbody.appendChild(tr)\r\n        \r\n    })\r\n    table.appendChild(tbody)\r\n    \r\n    let recentSale = root_element.querySelector('#recent-sale-order');\r\n    recentSale.innerHTML = \"\"\r\n    recentSale.appendChild(table);\r\n    \r\n})",
  "style": "table{\r\n    width:100%;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #04AA6D;\r\n  color: white;\r\n}"
 }
]