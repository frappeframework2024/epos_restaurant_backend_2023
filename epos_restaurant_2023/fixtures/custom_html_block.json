[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": null,
  "modified": "2023-10-04 17:08:45.075144",
  "name": "Sidebar Menu",
  "private": 0,
  "roles": [],
  "script": "let default_sidebar = document.querySelector('.layout-side-section');\r\ndefault_sidebar.remove()\r\n\r\nlet element = document.querySelector('.sidebar_menu');\r\n\r\nif(element){\r\n    element.remove();\r\n}\r\n\r\n\r\nlet my_menu = document.createElement(\"div\")\r\nmy_menu.classList.add(\"sidebar_menu\")\r\n\r\n\r\nfrappe.db.get_list('App Sidebar Menu', {\r\n    fields: ['name','parent_app_sidebar_menu', 'title','url','icon'],\r\n    limit:10000,\r\n    order_by:\"sort_order\"\r\n    \r\n}).then(result => {\r\n    let main_menu = document.createElement(\"ul\")\r\n    main_menu.classList.add(\"main_menu\")\r\n    result.filter(r=>r.parent_app_sidebar_menu=='root_menu').forEach(m=>{\r\n        let li = document.createElement(\"li\")\r\n        li.textContent = m.title\r\n        \r\n        //get child menu\r\n        if(result.filter(r=>r.parent_app_sidebar_menu==m.name).length>0){\r\n            let sub_menu = document.createElement(\"ul\")\r\n            sub_menu.classList.add(\"sub_menu\")\r\n            result.filter(r=>r.parent_app_sidebar_menu==m.name).forEach(s=>{\r\n                   let sub_li = document.createElement(\"li\")\r\n                    sub_li.textContent = s.title\r\n                    sub_menu.appendChild(sub_li)\r\n                    \r\n            })\r\n            li.appendChild(sub_menu)\r\n            \r\n        }\r\n        \r\n    \r\n        main_menu.appendChild(li)\r\n        \r\n                \r\n    })\r\n    my_menu.appendChild(main_menu)    \r\n     \r\n    document.querySelector(\"body\").prepend(my_menu)\r\n    \r\n\r\n    \r\n})\r\n\r\n\r\n",
  "style": ""
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<button>Testing</button>",
  "modified": "2023-10-05 12:05:17.217119",
  "name": "testing",
  "private": 0,
  "roles": [],
  "script": "root_element.querySelector('button').addEventListener('click', function(){\n    const el = document.querySelector('[custom_block_name=\"Member Check In\"]').querySelector(\".widget-body\").children[0].shadowRoot.querySelector(\"iframe\")\n    el.requestFullscreen()\n    el.contentWindow.postMessage(\"Hello from the main page!\", \"*\");\n\t\n})",
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<!--development-->\n<!--<iframe src='http://192.168.10.19:5577/gym/check-in-ui' style=\"width:100%;border:0\"/>-->\n\n\n<!--production-->\n<iframe src='/gym/check-in-ui' style=\"width:100%;border:0\"/>\n\n\n",
  "modified": "2023-12-04 14:17:52.022299",
  "name": "Member Check In",
  "private": 0,
  "roles": [],
  "script": "window.addEventListener(\"message\", (event)=>{\n    if(event.data==\"full_screen\"){\n        const el = document.querySelector('[custom_block_name=\"Member Check In\"]').querySelector(\".widget-body\").children[0].shadowRoot.querySelector(\"iframe\")\n        el.requestFullscreen()\n    }else if(event.data==\"view_all_recent_membership_check_in\"){\n        document.exitFullscreen();\n        frappe.set_route('List',\"Membership Check In\",\"List\")\n    }\n}, false);",
  "style": "iframe{\n    height: calc(100vh - 240px);\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"recent-sale-order\">Recent Sale Order</div>",
  "modified": "2023-10-06 14:14:55.470524",
  "name": "Recent Sale Order",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser(); // create a DOMParser object\r\n \r\n\t\t\t\r\nfrappe.db.get_list('Sale', {\r\n    fields: ['name','posting_date', 'customer','grand_total','total_quantity','creation'],\r\n    limit:15,\r\n    order_by:\"creation desc\"\r\n    \r\n}).then(data => {\r\n    let table    = document.createElement(\"table\");\r\n    let tbody = document.createElement(\"tbody\");\r\n    let tr = document.createElement(\"tr\");\r\n    let th = document.createElement(\"th\");\r\n    let td = document.createElement(\"td\");\r\n    \r\n    th.innerHTML = \"Sale No\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Posting Date\" \r\n    tr.appendChild(th)\r\n    \r\n     th = document.createElement(\"th\");\r\n    th.innerHTML = \"Creation\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Quantity\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Amount\" \r\n    tr.appendChild(th)\r\n    \r\n    \r\n    tbody.appendChild(tr)\r\n\r\n    \r\n    data.forEach((r)=>{\r\n        //sale number\r\n        tr = document.createElement(\"tr\");\r\n        td = document.createElement(\"td\");\r\n        td.textContent  = r.name;\r\n        tr.appendChild(td)\r\n        //sale date\r\n\r\n        td = document.createElement(\"td\");\r\n        td.textContent =frappe.format( r.posting_date,{fieldtype:\"Date\"});\r\n        tr.appendChild(td)\r\n        \r\n        td = document.createElement(\"td\");\r\n        td.textContent =frappe.format( r.creation,{fieldtype:\"Datetime\"});\r\n        tr.appendChild(td)\r\n        \r\n         //qauntity\r\n        td = document.createElement(\"td\");\r\n        td.appendChild(parser.parseFromString(frappe.format( r.total_quantity,{fieldtype:\"Float\"}), \"text/html\").querySelector(\"div\"));\r\n        tr.appendChild(td)\r\n        \r\n        //amount\r\n        td = document.createElement(\"td\");\r\n        td.appendChild(parser.parseFromString(frappe.format( r.grand_total,{fieldtype:\"Currency\"}), \"text/html\").querySelector(\"div\"));\r\n        tr.appendChild(td)\r\n        \r\n        tr.addEventListener('click', function() {\r\n        \r\n            frappe.set_route('Form', 'Sale',r.name)\r\n        });\r\n\r\n        tbody.appendChild(tr)\r\n        \r\n    })\r\n    table.appendChild(tbody)\r\n    \r\n    let recentSale = root_element.querySelector('#recent-sale-order');\r\n    recentSale.innerHTML = \"\"\r\n    recentSale.appendChild(table);\r\n    \r\n})",
  "style": "table{\r\n    width:100%;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;;\r\n  color: white;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"recent-membership-check-in\">Recent Membership Check In</div>\n<button id=\"view_all_recent_data\">View All Recent Data</button>",
  "modified": "2023-10-06 14:14:30.191739",
  "name": "Recent Membership Check In",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser(); // create a DOMParser object\n\nfrappe.call('epos_restaurant_2023.api.gym.get_recent_checked_ins',{\"limit\":8}).then(data=>{\n  \n    let table    = document.createElement(\"table\");\n    let tbody = document.createElement(\"tbody\");\n    let tr = document.createElement(\"tr\");\n    let th = document.createElement(\"th\");\n    let td = document.createElement(\"td\");\n    \n      \n    th.innerHTML = \"Check In No\";\n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Check In Date\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Creation\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Member\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Membership Type\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Membership\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Check In Count\" \n    tr.appendChild(th)\n    \n   \n    tbody.appendChild(tr)\n    \n    data.message.forEach((r)=>{\n         \n        //check in number\n        tr = document.createElement(\"tr\");\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_check_in;\n        tr.appendChild(td)\n        \n        //check in date\n        td = document.createElement(\"td\");\n        td.textContent =frappe.format( r.check_in_date,{fieldtype:\"Date\"});\n        tr.appendChild(td)\n        \n        //creation \n        td = document.createElement(\"td\");\n        td.textContent =frappe.format( r.creation,{fieldtype:\"Datetime\"});\n        tr.appendChild(td)\n        \n         //member_name\n        td = document.createElement(\"td\");\n        td.textContent  = r.member_name;\n        tr.appendChild(td)\n        \n         //membership_type\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_type;\n        tr.appendChild(td)\n        \n        //membership_name\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_name;\n        tr.appendChild(td)\n        \n         //membership check in\n        td = document.createElement(\"td\");\n         td.appendChild(parser.parseFromString(frappe.format( r.check_in_number,{fieldtype:\"Float\"}), \"text/html\").querySelector(\"div\"));\n        tr.appendChild(td)\n        \n        tr.addEventListener('click', function() {\n        \n            frappe.set_route('Form', 'Membership Check In',r.membership_check_in)\n        });\n\n        tbody.appendChild(tr)\n        \n    })\n    table.appendChild(tbody)\n    \n    let recentHTML = root_element.querySelector('#recent-membership-check-in');\n    recentHTML.innerHTML = \"\"\n    recentHTML.appendChild(table);\n    \n})\n\n\n//btn view\nlet btb_view = root_element.querySelector('#view_all_recent_data');\nbtb_view.addEventListener('click', function() {\n     frappe.set_route('List',\"Membership Check In\",\"List\")\n});",
  "style": "table{\r\n    width:100%;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;\r\n  color: white;\r\n}\r\n\r\n#view_all_recent_data{\r\n    margin-top:5px;\r\n    color:white;\r\n    height:var(--btn-height);\r\n    background-color: rgb(82, 146, 247);\r\n    border-radius:var(--border-radius);\r\n    border:none;\r\n}\r\n#view_all_recent_data:hover{\r\n     background-color:#097add;\r\n}"
 }
]