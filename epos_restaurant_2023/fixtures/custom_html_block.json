[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": null,
  "modified": "2023-10-04 17:08:45.075144",
  "name": "Sidebar Menu",
  "private": 0,
  "roles": [],
  "script": "let default_sidebar = document.querySelector('.layout-side-section');\r\ndefault_sidebar.remove()\r\n\r\nlet element = document.querySelector('.sidebar_menu');\r\n\r\nif(element){\r\n    element.remove();\r\n}\r\n\r\n\r\nlet my_menu = document.createElement(\"div\")\r\nmy_menu.classList.add(\"sidebar_menu\")\r\n\r\n\r\nfrappe.db.get_list('App Sidebar Menu', {\r\n    fields: ['name','parent_app_sidebar_menu', 'title','url','icon'],\r\n    limit:10000,\r\n    order_by:\"sort_order\"\r\n    \r\n}).then(result => {\r\n    let main_menu = document.createElement(\"ul\")\r\n    main_menu.classList.add(\"main_menu\")\r\n    result.filter(r=>r.parent_app_sidebar_menu=='root_menu').forEach(m=>{\r\n        let li = document.createElement(\"li\")\r\n        li.textContent = m.title\r\n        \r\n        //get child menu\r\n        if(result.filter(r=>r.parent_app_sidebar_menu==m.name).length>0){\r\n            let sub_menu = document.createElement(\"ul\")\r\n            sub_menu.classList.add(\"sub_menu\")\r\n            result.filter(r=>r.parent_app_sidebar_menu==m.name).forEach(s=>{\r\n                   let sub_li = document.createElement(\"li\")\r\n                    sub_li.textContent = s.title\r\n                    sub_menu.appendChild(sub_li)\r\n                    \r\n            })\r\n            li.appendChild(sub_menu)\r\n            \r\n        }\r\n        \r\n    \r\n        main_menu.appendChild(li)\r\n        \r\n                \r\n    })\r\n    my_menu.appendChild(main_menu)    \r\n     \r\n    document.querySelector(\"body\").prepend(my_menu)\r\n    \r\n\r\n    \r\n})\r\n\r\n\r\n",
  "style": ""
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<!--development-->\n<!--<iframe src='http://192.168.10.19:5577/gym/check-in-ui' style=\"width:100%;border:0\"/>-->\n\n\n<!--production-->\n<iframe src='/gym/check-in-ui' style=\"width:100%;border:0\"/>\n\n\n",
  "modified": "2023-12-04 14:17:52.022299",
  "name": "Member Check In",
  "private": 0,
  "roles": [],
  "script": "window.addEventListener(\"message\", (event)=>{\n    if(event.data==\"full_screen\"){\n        const el = document.querySelector('[custom_block_name=\"Member Check In\"]').querySelector(\".widget-body\").children[0].shadowRoot.querySelector(\"iframe\")\n        el.requestFullscreen()\n    }else if(event.data==\"view_all_recent_membership_check_in\"){\n        document.exitFullscreen();\n        frappe.set_route('List',\"Membership Check In\",\"List\")\n    }\n}, false);",
  "style": "iframe{\n    height: calc(100vh - 240px);\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk\">Frontdesk</a>",
  "modified": "2023-12-19 11:14:26.507840",
  "name": "Frontdesk Button",
  "private": 0,
  "roles": [
   {
    "parent": "Frontdesk Button",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Frontdesk Clerk"
   },
   {
    "parent": "Frontdesk Button",
    "parentfield": "roles",
    "parenttype": "Custom HTML Block",
    "role": "Frontdesk Manager"
   }
  ],
  "script": null,
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a id=\"btn\">\n    <div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row border\"> \n        <div class=\"d-flex align-items-center\"><b>Stay Over</b></div>\n\n        <div class=\"text-center rounded p-1 text-white fw-bold\" style=\"background:#00cbd0;width:30px\"><strong id=\"number_badge\"></strong></div>\n    </div>\n</a>",
  "modified": "2023-12-25 11:14:01.780968",
  "name": "Stay Over",
  "private": 0,
  "roles": [],
  "script": "frappe.call(\"edoor.api.frontdesk.get_daily_property_summary\").then((r)=>{\n    console.log(r.message.property)\n    root_element.querySelector('#number_badge').textContent=r.message.stay_over || 0\n\n\n    var baseURL = window.location.origin;\n    root_element.querySelector(\"#btn\").addEventListener(\"click\",function(){\n    \n           let msg = frappe.msgprint(\n                    `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Dashboard%20Stay%20Over%20Guest&no_letterhead=0&letterhead=No%20Letter%20Head&settings=%7B%7D&_lang=en&show_toolbar=0&view=ui&date=${r.message.working_date}&refresh=4.963202351696761\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                    \n                    'Stay Over'\n                );\n                msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n                setTimeout(function(){\n                    window.addEventListener('message', myEventHandler);\n                    let modal =document.querySelector('.modal')\n                    \n                    observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n                },1000)\n                \n                \n                \n    })\n \n     // Create an observer instance\n    const observer = new MutationObserver((mutationsList, observer) => {\n      // Use traditional 'for loops' for IE 11\n      for(const mutation of mutationsList) {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n          const style = mutation.target.getAttribute('style');\n          \n          if (style.includes('display: none')) {\n            window.removeEventListener('message', myEventHandler);\n          }\n        }\n      }\n    });\n    \n    \n    function myEventHandler(event) {\n      if(event.isTrusted && event.data){\n          const data = event.data.split('|')\n          if (data.length==2){\n              \n              if(data[0]==\"view_reservation_detail\"){\n                   window.location = \"/frontdesk/reservation-detail/\" + data[1] \n                   \n                \n              }else if (data[0] == \"view_reservation_stay_detail\"){\n                                window.location = \"/frontdesk/stay-detail/\" + data[1]\n              }\n              \n          }\n      }\n    }\n    \n})\n     \n     \n",
  "style": ".widget.shortcut-widget-box { \r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<hr/>",
  "modified": "2023-12-19 09:17:05.196750",
  "name": "hr",
  "private": 0,
  "roles": [],
  "script": null,
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "hello",
  "modified": "2024-05-13 12:43:09.101099",
  "name": "Testing Template",
  "private": 0,
  "roles": [],
  "script": "",
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<iframe src=\"/frontdesk/dashboard?layout=blank_layout\" style=\"width:100%;border:none;overflow:hidden\" id=\"iframe\" ></iframe>",
  "modified": "2024-04-27 08:34:27.109725",
  "name": "Owner Dashboard",
  "private": 0,
  "roles": [],
  "script": "var iframe = root_element.querySelector('#iframe');\r\n\r\niframe.addEventListener('load', function() {\r\n    var observer = new MutationObserver(function(mutationsList) {\r\n        iframe.style.height = iframe.contentWindow.document.body.scrollHeight + 'px';\r\n        \r\n    });\r\n\r\n    // Observe changes to the body of the document inside the iframe\r\n    observer.observe(iframe.contentWindow.document.body, { attributes: true, childList: true, subtree: true });\r\n});",
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div style=\"font-size:16px;font-weight:600;width:100%;background:#e9e9e9;border-radius:4px\" class=\"px-2 py-2 mb-2\">Recent Payment</div>\r\n<div id=\"unpaid-customer\">\r\n    \r\n</div>\r\n",
  "modified": "2024-06-26 17:04:26.101929",
  "name": "Recent Paid",
  "private": 0,
  "roles": [],
  "script": "\r\nlet parser = new DOMParser(); // create a DOMParser object\r\nconst template = `\r\n<table>\r\n    <thead>\r\n    <tr>\r\n        <th>Customer</th>\r\n        <th class=\"text-right\">Total Amount</th>\r\n        <th class=\"text-right\">Total Paid</th>\r\n        <th class=\"text-right\">Balance</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    {%for d in data%}\r\n    <tr data-id=\"{{d.customer}}\">\r\n        <td>{{d.customer_name}}</td>\r\n        <td>{{frappe.format(d.grand_total,{\"fieldtype\":\"Currency\"})}}</td>\r\n        <td>{{frappe.format(d.total_paid,{\"fieldtype\":\"Currency\"})}}</td>\r\n        <td>{{frappe.format(d.balance,{\"fieldtype\":\"Currency\"})}}</td>\r\n        </tr>\r\n    {%endfor%}\r\n    <tbody>\r\n    </table>\r\n`\r\n\t\t\t\r\n\t\t\t\r\nfrappe.call('epos_restaurant_2023.selling.doctype.customer.customer.get_unpaid_customer',{condition:\"total_paid >= grand_total\"}).then(data => {\r\n    const html = frappe.render_template(template,{data:data.message});\r\n    let dom = parser.parseFromString(html, \"text/html\").querySelector(\"table\")\r\n    root_element.querySelector('#unpaid-customer').appendChild(dom);\r\n    \r\n    \r\n    \r\n    \r\n})\r\n\r\n $(document).ready(function(){\r\n    $(root_element).find(\"div#unpaid-customer\").on('click', 'tr', function(event) {\r\n        window.parent.postMessage({\"customer\":$(this).data('id'),\"action\":\"Customer\"})\r\n    }) \r\n })\r\n    \r\n \r\n \r\n\r\n",
  "style": "table{\r\n    width:100%;\r\n}\r\nthead th {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;;\r\n  color: white;\r\n}\r\n#unpaid-customer{\r\n    height: 500px;\r\n    overflow-y: auto;\r\n}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"recent-membership-check-in\">Recent Membership Check In</div>\n<button id=\"view_all_recent_data\">View All Recent Data</button>",
  "modified": "2023-10-06 14:14:30.191739",
  "name": "Recent Membership Check In",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser(); // create a DOMParser object\n\nfrappe.call('epos_restaurant_2023.api.gym.get_recent_checked_ins',{\"limit\":8}).then(data=>{\n  \n    let table    = document.createElement(\"table\");\n    let tbody = document.createElement(\"tbody\");\n    let tr = document.createElement(\"tr\");\n    let th = document.createElement(\"th\");\n    let td = document.createElement(\"td\");\n    \n      \n    th.innerHTML = \"Check In No\";\n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Check In Date\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Creation\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Member\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Membership Type\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Membership\" \n    tr.appendChild(th)\n    \n    th = document.createElement(\"th\");\n    th.innerHTML = \"Check In Count\" \n    tr.appendChild(th)\n    \n   \n    tbody.appendChild(tr)\n    \n    data.message.forEach((r)=>{\n         \n        //check in number\n        tr = document.createElement(\"tr\");\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_check_in;\n        tr.appendChild(td)\n        \n        //check in date\n        td = document.createElement(\"td\");\n        td.textContent =frappe.format( r.check_in_date,{fieldtype:\"Date\"});\n        tr.appendChild(td)\n        \n        //creation \n        td = document.createElement(\"td\");\n        td.textContent =frappe.format( r.creation,{fieldtype:\"Datetime\"});\n        tr.appendChild(td)\n        \n         //member_name\n        td = document.createElement(\"td\");\n        td.textContent  = r.member_name;\n        tr.appendChild(td)\n        \n         //membership_type\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_type;\n        tr.appendChild(td)\n        \n        //membership_name\n        td = document.createElement(\"td\");\n        td.textContent  = r.membership_name;\n        tr.appendChild(td)\n        \n         //membership check in\n        td = document.createElement(\"td\");\n         td.appendChild(parser.parseFromString(frappe.format( r.check_in_number,{fieldtype:\"Float\"}), \"text/html\").querySelector(\"div\"));\n        tr.appendChild(td)\n        \n        tr.addEventListener('click', function() {\n        \n            frappe.set_route('Form', 'Membership Check In',r.membership_check_in)\n        });\n\n        tbody.appendChild(tr)\n        \n    })\n    table.appendChild(tbody)\n    \n    let recentHTML = root_element.querySelector('#recent-membership-check-in');\n    recentHTML.innerHTML = \"\"\n    recentHTML.appendChild(table);\n    \n})\n\n\n//btn view\nlet btb_view = root_element.querySelector('#view_all_recent_data');\nbtb_view.addEventListener('click', function() {\n     frappe.set_route('List',\"Membership Check In\",\"List\")\n});",
  "style": "table{\r\n    width:100%;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;\r\n  color: white;\r\n}\r\n\r\n#view_all_recent_data{\r\n    margin-top:5px;\r\n    color:white;\r\n    height:var(--btn-height);\r\n    background-color: rgb(82, 146, 247);\r\n    border-radius:var(--border-radius);\r\n    border:none;\r\n}\r\n#view_all_recent_data:hover{\r\n     background-color:#097add;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"btn row w-100 m-0 px-0 pt-0\">\n    <div class=\"col text-left p-0\"> \n        <button id=\"tab-arrival\" class=\"active\">Arrival <span class=\"chip\" id=\"chip-arrival\">0</span></button>\n        <button id=\"tab-stay-over\">Stay Over <span class=\"chip\" id=\"chip-stay-over\">1</span></button>\n        <button id=\"tab-departure\">Departure <span class=\"chip\" id=\"chip-departure\">1</span></button> \n    </div>\n    <div class=\"col border-bottom mr-2\"></div>\n</div>\n<div class=\"tab\">\n    <div class=\"tab-content show\" id=\"tab-content-arrival\"></div>\n    <div class=\"tab-content\" id=\"tab-content-stay-over\"></div>\n    <div class=\"tab-content\" id=\"tab-content-departure\"></div>\n</div>",
  "modified": "2024-01-03 08:32:22.517919",
  "name": "Remaining Data",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser()\nconst arrContent = root_element.querySelector('#tab-content-arrival')\nconst stayOverContent = root_element.querySelector('#tab-content-stay-over')\nconst departureContent = root_element.querySelector('#tab-content-departure')\n\n\nconst departureTab = root_element.querySelector('#tab-departure')\nconst arrivalTab = root_element.querySelector('#tab-arrival')\nconst stayOverTab = root_element.querySelector('#tab-stay-over')\n\nconst chipArrival = root_element.querySelector('#chip-arrival')\nconst chipStayOver = root_element.querySelector('#chip-stay-over')\nconst chipDeparture = root_element.querySelector('#chip-departure')\n\n\n\nroot_element.querySelector(\"#tab-arrival\").addEventListener('click', function (){\n    stayOverContent.classList.remove('show')\n    departureContent.classList.remove('show')\n    arrContent.classList.add('show')\n    \n    arrivalTab.classList.add('active')\n    departureTab.classList.remove('active')\n    stayOverTab.classList.remove('active')\n})\nroot_element.querySelector(\"#tab-stay-over\").addEventListener('click', function (){\n    stayOverContent.classList.add('show')\n    departureContent.classList.remove('show')\n    arrContent.classList.remove('show')\n    \n    arrivalTab.classList.remove('active')\n    departureTab.classList.remove('active')\n    stayOverTab.classList.add('active') \n})\nroot_element.querySelector(\"#tab-departure\").addEventListener('click', function (){\n    stayOverContent.classList.remove('show')\n    departureContent.classList.add('show')\n    arrContent.classList.remove('show')\n    \n    arrivalTab.classList.remove('active')\n    departureTab.classList.add('active')\n    stayOverTab.classList.remove('active')\n})\n\nfrappe.call(\"edoor.api.frontdesk.get_arrival_stay_over_departure_backend\").then((r)=>{ \n    chipArrival.textContent=r.message.arrival.length || 0\n    chipStayOver.textContent=r.message.stay_over.length || 0\n    chipDeparture.textContent=r.message.departure.length || 0\n    if (r.message.arrival != ''){\n        r.message.arrival.forEach(x=>{\n            root_element.querySelector(\"#tab-content-arrival\").appendChild(get_leave(x))\n        })\n    }\n    if (r.message.stay_over != ''){ \n        r.message.stay_over.forEach(x=>{\n            root_element.querySelector(\"#tab-content-stay-over\").appendChild(get_leave(x))\n        })\n    }\n    if (r.message.departure != ''){\n        r.message.departure.forEach(x=>{\n            root_element.querySelector(\"#tab-content-departure\").appendChild(get_leave(x))\n        })\n    }\n    if (r.message.arrival == ''){\n        root_element.querySelector(\"#tab-content-arrival\").textContent=('No Data')\n    }\n    if (r.message.stay_over == ''){\n        root_element.querySelector(\"#tab-content-stay-over\").textContent=('No Data')\n    }\n    if (r.message.departure == ''){\n        root_element.querySelector(\"#tab-content-departure\").textContent=('No Data')\n    } \n})\n\nfunction get_leave(data){  \n    let ref_number=\"\"\n    let arrival_date = formatDate(data.arrival_date)\n    let departure_date = formatDate(data.departure_date)\n    if (data.reference_number != null){\n        ref_number = `<div><strong>Reference #</strong>: ${data.reference_number || ''}</div>`\n    }\n    let ui = `\n        <div class=\"border rounded mb-2 p-2 mr-2 cursor-pointer\">\n        <a class=\"text-decoration-none\" href=\"/frontdesk/stay-detail/${data.name}\" target=\"_blank\">\n            <div class=\"d-flex justify-content-between\">\n                <div>\n                    <div><strong>RS Stay #</strong>: ${data.name || ''}</div>\n                    ${ref_number || ''}\n                    <div><strong>Guest</strong>: ${data.guest || ''} - ${data.guest_name || ''}</div>\n                    <div><strong>Room</strong>: ${data.room_type_alias || ''} / ${data.rooms || ''}</div>\n                    <div><strong>Stay Date</strong>: ${arrival_date || ''} - ${departure_date || ''} | Night: ${data.room_nights || ''}</div> \n                </div>\n                <div class=\"right-sight-st\">\n                    <span style=\"background:#21cbcf\" class=\"mr-2 p-1 rounded text-white\">${data.business_source || ''}</span><span style=\"background:#F5F5F5;\" class=\"mr-2 p-1 rounded\">${data.reservation_type || ''}</span><span class=\"p-1 rounded text-white\" style=\"background:${data.status_color}\">${data.reservation_status || ''}</span>\n                </div>\n            </div>\n        </div>\n        `\n    let dom = parser.parseFromString(ui, \"text/html\").querySelector(\"div\")\n    return dom\n}\n\n\nfunction formatDate(inputDateString) {\n  // Create a Date object from the input string\n  var inputDate = new Date(inputDateString);\n\n  // Extract components\n  var day = inputDate.getDate();\n  var month = inputDate.getMonth() + 1; // Months are zero-based, so add 1\n  var year = inputDate.getFullYear();\n\n  // Format components with leading zeros if necessary\n  var formattedDay = (day < 10) ? '0' + day : day;\n  var formattedMonth = (month < 10) ? '0' + month : month;\n\n  // Form the final formatted date string\n  var formattedDateString = formattedDay + '-' + formattedMonth + '-' + year;\n\n  return formattedDateString;\n}\n",
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n} \r\n.margin-bt{\r\n   margin-bottom: -30px;\r\n}\r\n.active{\r\n    border-top-color: #4d40ca;\r\n    border-left-color: #a0bde0;\r\n    border-right-color: #a0bde0; \r\n}\r\n.tab-content.show{\r\n    display: block;\r\n    max-height: 33rem;\r\n    overflow-y: auto;\r\n}\r\n.tab-content:not(.show){\r\n    display: none;\r\n}\r\nbutton{ \r\n    border-top-left-radius: 5px;\r\n    border-top-right-radius: 5px;\r\n    padding: 5px;\r\n    border-bottom: 0;\r\n    \r\n    border-top: 2px solid white;\r\n    border-left: 1px solid transparent;\r\n    border-right: 1px solid transparent;\r\n    transition: background-color 0.2s, border-color 0.2s, box-shadow 0.2s;\r\n    /* background-color: var(--bg-tb-color); */\r\n    background: #ffffff;\r\n    background: linear-gradient(to bottom, #ffffff 0%,#d1e1ee 100%);\r\n    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#d1e1ee',GradientType=0 );\r\n}\r\n.chip{\r\n    background: #00cbd0;\r\n    padding: 3px 10px;\r\n    border-radius: 5px;\r\n    color: #fff;\r\n}\r\n.btn:focus, .btn:active{\r\n    box-shadow: unset !important;\r\n    background: transparent !important;\r\n    outline: 0;\r\n}\r\n.right-sight-st span{\r\n    font-size: 12px;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n     <div class=\" pr-0\">\n         <div class=\"row p-0 m-0 margin-bt mb-2\">\n    <h5 class=\"m-0\">Room Status</h5>\n    <div class=\"col border-bottom\"></div>\n</div>\n        <div class=\"p-2 rounded border border\" >\n  <div class=\"card-body p-2\">\n    <div class=\"row\" id=\"my_status_result\">\n</div>\n\n</div>\n  <div class=\"col-12 p-0\">\n    <div class=\"progress rounded-0 mt-2\" id=\"my_status_result_bar\" style=\"height:3px\">\n  \n</div>\n</div>\n</div>\n</div>",
  "modified": "2023-12-25 11:44:22.894984",
  "name": "Room status",
  "private": 0,
  "roles": [],
  "script": "   let parser = new DOMParser()\nfrappe.call(\"edoor.api.frontdesk.get_house_keeping_status_backend\").then(result=>{   \n  var baseURL = window.location.origin;\n if (result.message  != ''){\n        result.message.forEach(x=>{\n            root_element.querySelector(\"#my_status_result\").appendChild(get_leave(x));\n            root_element.querySelector(\"#my_status_result_bar\").appendChild(get_bar(x));\n           \n         let selectedElement = root_element.querySelector( '#'+x.status.toLowerCase().replace(/\\s+/g, '_'));\n    if (selectedElement) {\n        selectedElement.addEventListener(\"click\", function () {\n  let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${x.property}&format=eDoor%20Housekeeping%20Status&&settings=%7B%7D&_lang=en&letterhead=No%20Letterhead&show_toolbar=0&view=ui&housekeeping_status=${encodeURIComponent(x.status)}&date=${x.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                x.status\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n        });\n    } else {\n        console.error(\"Element with selector \" + x.status + \" not found\");\n    }\n        })\n    }else{\n        root_element.querySelector(\"#my_status_result\").textContent=('No Data')\n    } \n\n}) \nfunction get_leave(data){    \n    var convertedString = data.status.toLowerCase().replace(/\\s+/g, '_');\n    let ui = `\n         <div role=\"button\" id='${convertedString}' style=\"color:${data.color};\" class=\"col lh-1 border-right\">\n        <h3 class=\"mb-0\" style=\"color:${data.color};\">${data.total} </h3>\n       ${data.status} \n    </div>\n        `\n    let dom = parser.parseFromString(ui, \"text/html\").querySelector(\"div\") \n    return dom\n   \n}\nfunction get_bar(data){ \n    let width = (data.total/data.total_room)*100\n    let ui = `\n        <div class=\"progress-bar\" id=\"my_status_result_bar\" role=\"progressbar\" aria-label=\"Segment one\" style=\"width:${width}% ;background-color:${data.color};\" aria-valuenow=\"15\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n        `\n    let dom = parser.parseFromString(ui, \"text/html\").querySelector(\"div\") \n    return dom\n   \n}\n// Create an observer instance\nconst observer = new MutationObserver((mutationsList, observer) => {\n  // Use traditional 'for loops' for IE 11\n  for(const mutation of mutationsList) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n      const style = mutation.target.getAttribute('style');\n      \n      if (style.includes('display: none')) {\n        window.removeEventListener('message', myEventHandler);\n      }\n    }\n  }\n});\n\n\nfunction myEventHandler(event) {\n  if(event.isTrusted && event.data){\n      const data = event.data.split('|')\n      if (data.length==2){\n          \n          if(data[0]==\"view_reservation_detail\"){\n               window.location = \"/frontdesk/reservation-detail/\" + data[1] \n               \n            \n          }else if (data[0] == \"view_reservation_stay_detail\"){\n                            window.location = \"/frontdesk/stay-detail/\" + data[1]\n          }\n          \n      }\n  }\n}\n",
  "style": ".lh-1 {\n    line-height: 1!important;\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"row\"> \n    <div class=\"col-12\">\n        <div class=\"row p-0 m-0 margin-bt mb-2\">\n            <h5 class=\"m-0\">Occupancy</h5>\n            <div class=\"col border-bottom\"></div>\n        </div>\n        <div class=\"p-2 rounded border\" >\n  <div class=\"card-body p-2\">\n    <div class=\"row\">\n    <div id=\"occupy_dailog\" role=\"button\" class=\"col lh-1 border-right\"  style=\"color:#50ac58;\">\n        <h3 id=\"occupy\" class=\"mb-0 arrival\"></h3>\n        <span>Occupy </span>\n    </div>\n    <div id=\"vacant_room_dailog\" role=\"button\" class=\"col lh-1 border-right\" style=\"color: rgb(236, 134, 75);\">\n        <h3 id=\"vacant_room\" class=\"mb-0 stay_over\">3</h3>\n        <span>Vacant Room</span>\n    </div>\n\n    </div>\n  </div>\n  <div class=\"col-12 p-0\">\n    <div class=\"progress rounded-0 mt-2\" style=\"height:3px\">\n  <div class=\"progress-bar\" role=\"progressbar\" aria-label=\"Segment one\" id=\"occupy_bar\" aria-valuenow=\"15\" id=\"occupy_bar\" style=\"background:#50ac58;\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n     \n  </div>\n  <div class=\"progress-bar\" role=\"progressbar\" aria-label=\"Segment two\" id=\"vacant_room_bar\" style=\"background-color: rgb(236, 134, 75);\" aria-valuenow=\"10\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n\n  </div>\n  \n</div>\n</div>\n</div>\n    </div>\n</div>",
  "modified": "2024-05-13 09:04:32.491990",
  "name": "Occupancy block",
  "private": 0,
  "roles": [],
  "script": "\nfrappe.call(\"edoor.api.frontdesk.get_daily_property_summary\").then((r)=>{\nconsole.log(r)\n  var baseURL = window.location.origin;\n    root_element.querySelector('#occupy').textContent=(r.message.total_room_occupy || \"0\") + ' %'\n    root_element.querySelector('#vacant_room').textContent=r.message.total_room_vacant || \"0\"\n    root_element.querySelector('#occupy_bar').style.width= ((parseFloat(r.message.occupancy) ) + '%');\n    let vacant_room_bar = 100 - r.message.occupancy ;\nroot_element.querySelector('#vacant_room_bar').style.width = vacant_room_bar + '%';\n\n\n\n\nroot_element.querySelector(\"#occupy_dailog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Room%20Occupy%20List&&settings=%7B%7D&_lang=en&letterhead=No%20Letterhead&show_toolbar=0&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Occupy'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\nroot_element.querySelector(\"#vacant_room_dailog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Vacant%20Room&&settings=%7B%7D&_lang=en&letterhead=No%20Letterhead&show_toolbar=0&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Vacant Room'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n\n\n // Create an observer instance\nconst observer = new MutationObserver((mutationsList, observer) => {\n  // Use traditional 'for loops' for IE 11\n  for(const mutation of mutationsList) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n      const style = mutation.target.getAttribute('style');\n      \n      if (style.includes('display: none')) {\n        window.removeEventListener('message', myEventHandler);\n      }\n    }\n  }\n});\n\n\n\nfunction myEventHandler(event) {\n  if(event.isTrusted && event.data){\n      const data = event.data.split('|')\n      if (data.length==2){\n          \n          if(data[0]==\"view_reservation_detail\"){\n               window.location = \"/frontdesk/reservation-detail/\" + data[1] \n               \n            \n          }else if (data[0] == \"view_reservation_stay_detail\"){\n                            window.location = \"/frontdesk/stay-detail/\" + data[1]\n          }\n          \n      }\n  }\n}\n})\n\n",
  "style": ".lh-1 {\n    line-height: 1!important;\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/guest-database \" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Guest Database     \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2024-02-24 08:39:39.646081",
  "name": "Guest Database link btn",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/guest-ledger \" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Guest Ledger     \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 14:02:42.845316",
  "name": "Guest Ledger link btn",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/reservations\" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Reservations List    \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 14:04:24.816906",
  "name": "Reservations List link btn",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/city-ledger\" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    City Ledger   \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 14:05:16.698408",
  "name": "City Ledger link btn",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/inventory\" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Room Inventory  \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 14:05:59.805770",
  "name": "Room Inventory link btn",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/frontdesk \" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Frontdesk     \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 13:59:07.918139",
  "name": "Frontdesk btn link",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/dashboard\" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Dashboard    \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a>",
  "modified": "2023-12-21 13:58:04.583338",
  "name": "Dashboard",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"row p-0 m-0 margin-bt\">\n    <h5 class=\"m-0\">Shortcut Link</h5>\n    <div class=\"col border-bottom\"></div>\n</div>",
  "modified": "2023-12-21 11:12:20.444863",
  "name": "Shortcut Link Title",
  "private": 0,
  "roles": [],
  "script": null,
  "style": ".margin-bt{\n   margin-bottom: -30px;\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"p-2 overflow-hidden\">\n    <div class=\"row m-0 p-0 mb-3\">\n       <h5 class=\"m-0\" >Recent Activities</h5>\n     <div class=\"col border-bottom\"></div>  \n    </div>\n   \n    <div style=\"overflow-y:auto;height:33rem;\" >\n        <div class=\"mr-2\" id=\"my_audit_result\"></div> \n    </div> \n    <button id=\"view_full_report\" class=\"border-0 rounded bg-info text-white p-1\">View Full Activities</button>\n</div>\n ",
  "modified": "2024-01-02 17:34:01.183636",
  "name": "Recent Activities",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser()\nfrappe.call(\"edoor.api.frontdesk.get_recent_audit_trail\").then(result=>{\n    if (result.message != ''){\n        result.message.forEach(x=>{\n            root_element.querySelector(\"#my_audit_result\").appendChild(get_leave(x))\n        })\n    }else{\n        root_element.querySelector(\"#my_audit_result\").textContent=('No Data')\n    } \n    console.log(result.message)\n}) \nfunction get_leave(data){    \n    let ui = `\n        <div>\n            <div class=\"d-flex\">\n                <div class=\"d-flex align-items-center\" style=\"width:40px;\"> \n                    <div class=\"profile\" style=\"background-image:url(${data.custom_comment_by_photo});background-position: center center;\"></div>\n                </div>\n                \n                <div class=\"ml-4\">\n                    <span><strong>${data.comment_by || \"\"}</strong> | <span>${data.subject}</span> | <span class=\"text-secondary\">${data.creation || \"\"}</span></span><br/>\n                    <span>${data.reference_doctype || \"\"}</span> | <span style=\"cursor:pointer\" id=\"link_refname\" class=\"text-info\">${data.reference_name || \"\"}</span>\n                    <div>\n                        <span class=\"activities-descp\">${data.content || \"\"}</span>\n                    </div>\n                </div>\n            </div>\n            <hr/>\n        </div>\n        `\n    let dom = parser.parseFromString(ui, \"text/html\").querySelector(\"div\")  \n    return dom\n}\n\nlet fullReportView = root_element.querySelector('#view_full_report')\nfullReportView.addEventListener('click', function () {\n    frappe.set_route('query-report/Audit%20Trail%20Report');    \n})\n\n\n\n\n",
  "style": ".profile{\n    background-size:cover;\n    background-image: radial-gradient(500px 350px at 20% bottom, rgb(0 0 0 / 34%), rgb(0 0 0 / 3%));\n    background-repeat: no-repeat;\n    width: 40px;\n    height: 40px;\n    border: 1px solid #ccc;\n    border-radius: 50%;\n} \n "
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<a href=\"/frontdesk/housekeeping\" ><div class=\"widget shortcut-widget-box d-flex justify-content-between flex-row\">\n\n    <b>\n    Housekeeping     \n    </b>\n\n<div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"16px\" height=\"16px\" viewBox=\"0 0 24 24\">\n  <path fill-rule=\"evenodd\" d=\"M5,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.51283584 7.61395981,3.93550716 7.11662113,3.99327227 L7,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,19 C4,19.5128358 4.38604019,19.9355072 4.88337887,19.9932723 L5,20 L19,20 C19.5128358,20 19.9355072,19.6139598 19.9932723,19.1166211 L20,19 L20,17 C20,16.4477153 20.4477153,16 21,16 C21.5128358,16 21.9355072,16.3860402 21.9932723,16.8833789 L22,17 L22,19 C22,20.5976809 20.75108,21.9036609 19.1762728,21.9949073 L19,22 L5,22 C3.40231912,22 2.09633912,20.75108 2.00509269,19.1762728 L2,19 L2,5 C2,3.40231912 3.24891996,2.09633912 4.82372721,2.00509269 L5,2 L7,2 L5,2 Z M21,2 L21.081,2.003 L21.2007258,2.02024007 L21.2007258,2.02024007 L21.3121425,2.04973809 L21.3121425,2.04973809 L21.4232215,2.09367336 L21.5207088,2.14599545 L21.5207088,2.14599545 L21.6167501,2.21278596 L21.7071068,2.29289322 L21.7071068,2.29289322 L21.8036654,2.40469339 L21.8036654,2.40469339 L21.8753288,2.5159379 L21.9063462,2.57690085 L21.9063462,2.57690085 L21.9401141,2.65834962 L21.9401141,2.65834962 L21.9641549,2.73400703 L21.9641549,2.73400703 L21.9930928,2.8819045 L21.9930928,2.8819045 L22,3 L22,3 L22,9 C22,9.55228475 21.5522847,10 21,10 C20.4477153,10 20,9.55228475 20,9 L20,5.414 L13.7071068,11.7071068 C13.3466228,12.0675907 12.7793918,12.0953203 12.3871006,11.7902954 L12.2928932,11.7071068 C11.9324093,11.3466228 11.9046797,10.7793918 12.2097046,10.3871006 L12.2928932,10.2928932 L18.584,4 L15,4 C14.4477153,4 14,3.55228475 14,3 C14,2.44771525 14.4477153,2 15,2 L21,2 Z\"/>\n</svg>\n</div>\n</div>\n</a> \n",
  "modified": "2023-12-25 11:19:12.587525",
  "name": "housekeeping link btn",
  "private": 0,
  "roles": [],
  "script": "root_element.querySelector(\"#btn\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                '<iframe src=\"http://192.168.10.19:1216/printview?doctype=Business%20Branch&name=ESTC%20HOTEL&format=eDoor%20Dashboard%20Stay%20Over%20Guest&&settings=%7B%7D&_lang=en&letterhead=No%20Letterhead&show_toolbar=0&view=ui&date=2023-12-25&invoice_style=Debit/Credit%20Style&show_room_number=1&show_account_code=1&show_cash_count=1&show_cash_float=1&start_date=1973-12-22&end_date=2073-12-22&refresh=5.989672291913898\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>',\n                \n                'Arrival Guest'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n \n // Create an observer instance\nconst observer = new MutationObserver((mutationsList, observer) => {\n  // Use traditional 'for loops' for IE 11\n  for(const mutation of mutationsList) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n      const style = mutation.target.getAttribute('style');\n      \n      if (style.includes('display: none')) {\n        window.removeEventListener('message', myEventHandler);\n      }\n    }\n  }\n});\n\n\nfunction myEventHandler(event) {\n  if(event.isTrusted && event.data){\n      const data = event.data.split('|')\n      if (data.length==2){\n          \n          if(data[0]==\"view_reservation_detail\"){\n               window.location = \"/frontdesk/reservation-detail/\" + data[1] \n               \n            \n          }else if (data[0] == \"view_reservation_stay_detail\"){\n                            window.location = \"/frontdesk/stay-detail/\" + data[1]\n          }\n          \n      }\n  }\n}\n\n \n\n\n \n \n",
  "style": ".widget.shortcut-widget-box {\r\n    background: #ebeef0!important;\r\n    padding: 10px!important;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div style=\"font-size:16px;font-weight:600;width:100%;background:#e9e9e9;border-radius:4px\" class=\"px-2 py-2 mb-2\">Unpaid</div>\r\n<div id=\"unpaid-customer\">\r\n    \r\n</div>\r\n",
  "modified": "2024-06-26 16:11:56.550047",
  "name": "Unpaid Customer",
  "private": 0,
  "roles": [],
  "script": "\r\nlet parser = new DOMParser(); // create a DOMParser object\r\nconst template = `\r\n<table>\r\n    <thead>\r\n    <tr>\r\n        <th>Customer</th>\r\n        <th class=\"text-right\">Total Amount</th>\r\n        <th class=\"text-right\">Total Paid</th>\r\n        <th class=\"text-right\">Balance</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    {%for d in data%}\r\n    <tr data-id=\"{{d.customer}}\">\r\n        <td>{{d.customer_name}}</td>\r\n        <td>{{frappe.format(d.grand_total,{\"fieldtype\":\"Currency\"})}}</td>\r\n        <td>{{frappe.format(d.total_paid,{\"fieldtype\":\"Currency\"})}}</td>\r\n        <td>{{frappe.format(d.balance,{\"fieldtype\":\"Currency\"})}}</td>\r\n        </tr>\r\n    {%endfor%}\r\n    <tbody>\r\n    </table>\r\n`\r\n\t\t\t\r\n\t\t\t\r\nfrappe.call('epos_restaurant_2023.selling.doctype.customer.customer.get_unpaid_customer',{condition:\"balance > 0\"}).then(data => {\r\n    const html = frappe.render_template(template,{data:data.message});\r\n    let dom = parser.parseFromString(html, \"text/html\").querySelector(\"table\")\r\n    root_element.querySelector('#unpaid-customer').appendChild(dom);\r\n    \r\n    \r\n    \r\n    \r\n})\r\n\r\n $(document).ready(function(){\r\n    $(root_element).find(\"div#unpaid-customer\").on('click', 'tr', function(event) {\r\n        window.parent.postMessage({\"customer\":$(this).data('id'),\"action\":\"Customer\"})\r\n    }) \r\n })\r\n    \r\n \r\n \r\n\r\n",
  "style": "table{\r\n    width:100%;\r\n}\r\nthead th {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;;\r\n  color: white;\r\n}\r\n#unpaid-customer{\r\n    height: 500px;\r\n    overflow-y: auto;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<h5>System Date</h5>\n<div class=\"p-2 rounded border\" style=\"height:215px\">\n    <div class=\"d-flex justify-content-center align-items-center h-100\">\n        <div>\n            <h4 class=\"text-center\" id=\"name_day\"></h4>\n            <h1 style=\"color:#f79242;\" class=\"text-center\" id=\"day\"></h1>\n            <h4 class=\"text-center\" id=\"year\"></h4>\n        </div>\n    </div>\n</div>",
  "modified": "2023-12-21 11:58:16.813237",
  "name": "System Date",
  "private": 0,
  "roles": [],
  "script": "frappe.call(\"edoor.api.frontdesk.get_daily_property_summary\").then((r)=>{\n    \n    console.log(r.message.working_date)\n    \n    function parseDateString(dateString) {\n    // Assuming dateString is in the format \"YYYY-MM-DD\"\n    const [year, month, day] = dateString.split('-');\n\n    // Convert month from number to month name\n    const months = [\n        'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ];\n    const monthName = months[parseInt(month, 10) - 1];\n\n    const dateObject = new Date(`${monthName} ${day}, ${year}`);\n    \n    // Get the day of the week\n    const daysOfWeek = [\n        'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n    const dayOfWeek = daysOfWeek[dateObject.getDay()];\n\n    return {\n        day: parseInt(day, 10),\n        month: monthName,\n        year: parseInt(year, 10),\n        dayOfWeek: dayOfWeek\n    };\n}\n\n\nconst parsedDate = parseDateString(r.message.working_date);\n\nroot_element.querySelector('#name_day').textContent=parsedDate.dayOfWeek || \"\"\nroot_element.querySelector('#day').textContent=parsedDate.day || \"\"\nroot_element.querySelector('#year').textContent=parsedDate.month + ' ' + parsedDate.year  || \"\"\n    \n})",
  "style": null
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"recent-sale-order\">Recent Sale Order</div>",
  "modified": "2023-10-06 14:14:55.470524",
  "name": "Recent Sale Order",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser(); // create a DOMParser object\r\n \r\n\t\t\t\r\nfrappe.db.get_list('Sale', {\r\n    fields: ['name','posting_date', 'customer','grand_total','total_quantity','creation'],\r\n    limit:15,\r\n    order_by:\"creation desc\"\r\n    \r\n}).then(data => {\r\n    let table    = document.createElement(\"table\");\r\n    let tbody = document.createElement(\"tbody\");\r\n    let tr = document.createElement(\"tr\");\r\n    let th = document.createElement(\"th\");\r\n    let td = document.createElement(\"td\");\r\n    \r\n    th.innerHTML = \"Sale No\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Posting Date\" \r\n    tr.appendChild(th)\r\n    \r\n     th = document.createElement(\"th\");\r\n    th.innerHTML = \"Creation\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Quantity\" \r\n    tr.appendChild(th)\r\n    \r\n    th = document.createElement(\"th\");\r\n    th.innerHTML = \"Amount\" \r\n    tr.appendChild(th)\r\n    \r\n    \r\n    tbody.appendChild(tr)\r\n\r\n    \r\n    data.forEach((r)=>{\r\n        //sale number\r\n        tr = document.createElement(\"tr\");\r\n        td = document.createElement(\"td\");\r\n        td.textContent  = r.name;\r\n        tr.appendChild(td)\r\n        //sale date\r\n\r\n        td = document.createElement(\"td\");\r\n        td.textContent =frappe.format( r.posting_date,{fieldtype:\"Date\"});\r\n        tr.appendChild(td)\r\n        \r\n        td = document.createElement(\"td\");\r\n        td.textContent =frappe.format( r.creation,{fieldtype:\"Datetime\"});\r\n        tr.appendChild(td)\r\n        \r\n         //qauntity\r\n        td = document.createElement(\"td\");\r\n        td.appendChild(parser.parseFromString(frappe.format( r.total_quantity,{fieldtype:\"Float\"}), \"text/html\").querySelector(\"div\"));\r\n        tr.appendChild(td)\r\n        \r\n        //amount\r\n        td = document.createElement(\"td\");\r\n        td.appendChild(parser.parseFromString(frappe.format( r.grand_total,{fieldtype:\"Currency\"}), \"text/html\").querySelector(\"div\"));\r\n        tr.appendChild(td)\r\n        \r\n        tr.addEventListener('click', function() {\r\n        \r\n            frappe.set_route('Form', 'Sale',r.name)\r\n        });\r\n\r\n        tbody.appendChild(tr)\r\n        \r\n    })\r\n    table.appendChild(tbody)\r\n    \r\n    let recentSale = root_element.querySelector('#recent-sale-order');\r\n    recentSale.innerHTML = \"\"\r\n    recentSale.appendChild(table);\r\n    \r\n})",
  "style": "table{\r\n    width:100%;\r\n}\r\n td,th {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\ntr:nth-child(even){background-color: #f2f2f2;}\r\n\r\ntr:hover {background-color: #ddd; cursor:pointer}\r\n\r\nth {\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  text-align: left;\r\n  background-color: #0398e1 !important;;\r\n  color: white;\r\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"wrapper-banner\" id=\"pattern_background\">\n    <div class=\"banner\">\n        <div class=\"banner-bg-imge\">\n            <div class=\"user_info\">\n                <div>\n                    <div class=\"avatar\" id=\"avatar_image\">\n                    </div> \n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"inner-intro-text d-none d-md-block mt-3\">\n        <h2 id=\"property_name_0\" class=\"m-0\"></h2>\n        <p class=\"postition m-0\">Property ID: <span id=\"property_position_0\"></span></p>\n        <p id=\"property_add_0\"></p> \n    </div>\n</div>\n\n\n",
  "modified": "2024-05-30 09:06:14.115135",
  "name": "Profile Banner",
  "private": 0,
  "roles": [],
  "script": "frappe.call(\"edoor.api.frontdesk.get_daily_property_summary\").then((r)=>{ \n    \n    \n    // root_element.querySelector('#avatar').src=r.message.photo || \"\" \n    root_element.querySelector('#property_name_0').textContent=r.message.property || \"\"\n    root_element.querySelector('#property_position_0').textContent=r.message.property_code || \"\"\n    root_element.querySelector('#property_add_0').textContent=r.message.address || \"\"\n    \n    if(r.message.property_background_banner){\n        root_element.querySelector(\".banner\").style.backgroundImage = \"url('\" + r.message.property_background_banner  + \"')\";\n    }\n    \n    if(r.message.photo){\n        root_element.querySelector(\"#avatar_image\").style.backgroundImage = \"url('\" + r.message.photo  + \"')\";\n    }\n    \n    if(r.message.pattern_background){\n        root_element.querySelector(\"#pattern_background\").style.backgroundImage = \"url('\" + r.message.pattern_background  + \"')\";\n    }\n    \n    \n    const getDate = r.message.working_date\n    const dateConvert = convertDate(getDate)\n    root_element.querySelector('#date').textContent=dateConvert || \"\"\n    \n    \n    \n    function convertDate(inputDate) {\n      const date = new Date(inputDate);\n\n      // Define formatting options\n      const options = {\n        weekday: 'long',\n        day: 'numeric',\n        month: 'long',\n        year: 'numeric',\n      };\n    \n      // Format the date using Intl.DateTimeFormat\n      const formattedDate = new Intl.DateTimeFormat('en-US', options).format(date);\n    \n      // Split the formatted date into components\n      const [weekday, day, month, year] = formattedDate.split(', ').map(item => item.trim());\n    \n      // Return an object with individual components\n      return {\n        weekday,\n        day,\n        month,\n        year,\n      };\n    }\n})\n\n",
  "style": "*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\nbody {\n  min-height: 100vh;\n  text-rendering: optimizeSpeed;\n  line-height: 1.5;\n}\n.wrapper-banner{\n    height: 390px;\n    background: #f5f5f5;\n    position: relative;\n    top: -22px;\n    left: -15px;\n    width: calc(100% + 30px);\n}\n.banner{\n    height: 273px;\n    background-image: radial-gradient(500px 350px at 20% bottom, rgb(0 0 0 / 34%), rgb(0 0 0 / 3%));\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size:cover;\n    position: relative;\n    border-radius: 10px 10px 00px 0px;\n}\n.user_info{\n    position: absolute;\n    left: 8rem;\n    bottom: -38%;\n    transform: translateX(-50%);\n}\n.user_info .avatar{\n    border: 5px solid #fff;\n    border-radius: 50%;\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n}\n.avatar {\n  width: 150px;\n  height: 150px; \n  overflow: hidden;\n  background-image: radial-gradient(500px 350px at 20% bottom, rgb(0 0 0 / 34%), rgb(0 0 0 / 3%));\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size:cover;\n}\n.avatar img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.user-info {\n  color: white;\n  font-size: 24px;\n}\n.intro-text{\n    position: relative;\n    margin-top: 10px;\n}\n.inner-intro-text{\n    position: absolute;\n    left: 14rem;\n}\nh1,h2,h3,h4,h5,h6{\n    margin-bottom: 10px;\n} \nsvg {\n    fill: #9b9b9b;\n}\n\n/*break point*/\n@media (max-width: 767.98px){\n    .avatar{\n        width: 100px;\n        height: 100px;\n    }\n    .user_info{\n        left: 50%;\n        top: 50%;\n        bottom: unset !important;\n        transform: translate(-50%, -85%);\n        width: 75%;\n        display: flex;\n        justify-content: center;\n    }\n    .inner-intro-text{\n        left: 0;\n    }\n    .intro-text{\n        margin-top: 55px;\n    }\n    .inner-intro-text > *{\n        text-align: center;\n    }\n    .wrapper-banner{\n        height: 500px;\n    }\n    svg{\n        fill: #fff !important;\n    }\n    .wrapper-banner{\n        height: 300px;\n    }\n}\n@media (max-width: 991.98px){\n    .wrapper-banner{\n        left: -10px;\n        width: calc(100% + 20px);\n    }\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"flex justify-content-between\">\n    <h3>Recent Journal Transaction</h3>\n    <button id=\"view_journal_report\" class=\"border-0 rounded bg-info text-white px-2\">View Journal Report</button>\n</div>\n<br/>\n<div class=\"form-grid-container\">\n    <div class=\"form-grid\">\n        <div class=\"grid-heading-row\" style=\"height: auto !important;\">\n            <div class=\"grid-row\">\n                <div class=\"data-row row\"> \n                    <div class=\"col text-center\" style=\"max-width: 3%;\">\n                        <span>No.</span>\n                    </div> \n                    <div class=\"col col-1\" style=\"min-width: 10%;\">Folio Transaction</div>\n                    <div class=\"col text-center\" style=\"min-width: 8%;\">Date</div>\n                    <div class=\"col text-center\" style=\"max-width: 5%;\">Room#</div>\n                    <div class=\"col col-2\">Account</div>\n                    <div class=\"col text-center\" style=\"max-width: 3%;\">Qty</div>\n                    <div class=\"col text-right\">Amount/Rate</div>\n                    <div class=\"col text-right\">Discount</div>\n                    <div class=\"col text-right\">Tax</div>\n                    <div class=\"col text-right\">Total Amount</div>\n                    <div class=\"col\">Owner</div>\n                    <div class=\"col\">Created</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"grid-body\">\n            <div id=\"data_row_rjt\">   \n            </div>\n        </div>\n    </div>\n</div> ",
  "modified": "2024-05-13 16:36:57.127846",
  "name": "Recent Journal Transaction",
  "private": 0,
  "roles": [],
  "script": "let parser = new DOMParser()\nconst template = `\n    {% var index = 1 %}\n    <div class=\"rows\">\n        {%for d in data%}\n            {% var owner = d.owner %}\n            {% var owner_un = owner.split('@')[0] %}\n            <div class=\"grid-row\">\n                <div class=\"data-row row\">\n                    <div class=\"col text-center\" style=\"max-width: 3%;\">{{index}}</div>\n                    {% if d.is_auto_post == 1 %}\n                        <div class=\"col col-1\" style=\"min-width: 10%;color: #ff3720 !important;\" ><a href=\"#\">{{d.name}}</a></div>\n                    {% else %}\n                        <div class=\"col col-1\" style=\"min-width: 10%;\"><a href=\"#\">{{d.name}}</a></div>\n                    {% endif %}\n                    <div class=\"col text-center\" style=\"min-width: 8%;\">{{ frappe.format(d.posting_date,{\"fieldtype\":\"Date\"})}}</div>\n                    <div class=\"col text-center\" style=\"max-width: 5%;\">{{d.room_number}}</div>\n                    <div class=\"col col-2\">\n                        {{d.account_code}} - {{d.account_name}} <br/> \n                        {% if d.note %}\n                            <i>Note:</i> {{d.note}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col text-center\" style=\"max-width: 3%;\">\n                        {% if d.allow_enter_quantity == 1 %}\n                            {{d.quantity}}\n                        {% endif %}\n                    </div>\n                    <div class=\"col text-right\">{{frappe.format(d.amount,{\"fieldtype\":\"Currency\"})}}</div>\n                    <div class=\"col text-right\">{{frappe.format(d.discount_amount,{\"fieldtype\":\"Currency\"})}}</div>\n                    <div class=\"col text-right\">{{frappe.format(d.total_tax,{\"fieldtype\":\"Currency\"})}}</div>\n                    <div class=\"col text-right\">{{frappe.format(d.total_amount,{\"fieldtype\":\"Currency\"})}}</div> \n                    <div class=\"col\">{{owner_un}}</div>\n                    <div class=\"col creation_date\">{{d.creation}}</div>\n                </div>\n            </div>\n            {% var index = index + 1 %}\n        {%endfor%}\n    </div>\n`\nfrappe.db.get_list(\"Folio Transaction\",{\n    fields:[\n        \"idx\",\n        \"name\",\n        \"transaction_number\",\n        \"posting_date\",\n        \"reservation\",\n        \"room_number\",\n        \"parent_reference\",\n        \"type\",\n        \"account_code\",\n        \"account_name\",\n        \"quantity\",\n        \"input_amount\",\n        \"price\",\n        \"amount\",\n        \"discount_amount\",\n        \"total_tax\",\n        \"total_amount\",\n        \"bank_fee_amount\",\n        \"note\",\n        \"creation\",\n        \"owner\",\n        \"modified\",\n        \"modified_by\",\n        \"show_print_preview\",\n        \"print_format\",\n        \"is_auto_post\",\n        \"allow_enter_quantity\",\n        \"target_transaction_number\",\n        \"city_ledger_name\",\n        \"source_transaction_number\",\n        \"report_description\",    \n    ],\n    filters:{\"parent_reference\":\"\"}\n}).then(result=>{ \n   const html = frappe.render_template(template,{data:result})\n   \n   \n   let dom = parser.parseFromString(html, \"text/html\").querySelector(\"div.rows\")\n   dom.querySelectorAll(\"a\").forEach(a=>{\n       a.addEventListener(\"click\",function(){\n           \n           frappe.set_route(\"Form\", \"Folio Transaction\", a.textContent);\n       })\n   })\n    root_element.querySelector(\"#data_row_rjt\").appendChild(dom)\n    \n    dom.querySelectorAll('.creation_date').forEach(x=> {\n        let timestamp = x.textContent\n        let date = new Date(timestamp);\n\n        let prettyDates = prettyDate(date)\n        x.textContent = prettyDates\n    })  \n})\n\n\nlet viewJournalReport = root_element.querySelector('#view_journal_report')\nviewJournalReport.addEventListener('click', function () {\n    frappe.set_route('query-report/General%20Journal%20Transaction');    \n})\n\nfunction prettyDate(date) {\n    var diff = Math.floor((new Date() - date) / 1000);\n    var dayDiff = Math.floor(diff / 86400);\n\n    if (isNaN(dayDiff) || dayDiff < 0) {\n        return '';\n    }\n\n    if (dayDiff === 0) {\n        if (diff < 60) return 'Just now';\n        if (diff < 120) return '1 minute ago';\n        if (diff < 3600) return Math.floor(diff / 60) + ' minutes ago';\n        if (diff < 7200) return '1 hour ago';\n        if (diff < 86400) return Math.floor(diff / 3600) + ' hours ago';\n    }\n\n    if (dayDiff === 1) return 'Yesterday';\n    if (dayDiff < 7) return dayDiff + ' days ago';\n    if (dayDiff < 31) return Math.ceil(dayDiff / 7) + ' weeks ago';\n    if (dayDiff < 365) return Math.ceil(dayDiff / 30) + ' months ago';\n    return Math.ceil(dayDiff / 365) + ' years ago';\n}\n",
  "style": ".form-grid {\n    overflow: auto;\n    height: 36rem;\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "\n<div class=\"row\">\n    <div class=\"col-12 col-md-3 pr-0\">\n            <div class=\"row p-0 m-0 margin-bt mb-2\">\n    <h5 class=\"m-0\">System Date</h5>\n    <div class=\"col border-bottom\"></div>\n</div>\n<div class=\"p-2 rounded border\" style=\"height:215px\">\n    <div class=\"d-flex justify-content-center align-items-center h-100\">\n        <div>\n            <h4 class=\"text-center\" id=\"name_day\"></h4>\n            <h1 style=\"color:#f79242;\" class=\"text-center\" id=\"day\"></h1>\n            <h4 class=\"text-center\" id=\"year\"></h4>\n        </div>\n    </div>\n</div>\n    </div>\n    <div class=\"col-12 col-md-9\">\n           <div class=\"row p-0 m-0 margin-bt mb-2\">\n    <h5 class=\"m-0\">Summary</h5>\n    <div class=\"col border-bottom\"></div>\n</div> \n<div class=\"p-2 rounded border\" style=\"height:215px\">\n    <div class=\"summary-kpi\">\n        <div class=\"row m-0\">\n            <div class=\"col-3 p-1\">\n                <div id=\"arrival_dialog\" role=\"button\" class=\"border p-2 rounded\">\n                    <span> \n                        <div class=\"d-flex justify-content-between\">\n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Checked-in\" style=\"color:#21c2b5\" id=\"total_arrival\">0</h2></span><span><h2 class=\"px-1\" style=\"color:#21c2b5\"> / </h2></span>\n                                <span><h2 title=\"Total Arrival\" style=\"color:#21c2b5\" id=\"arrival\">0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-bell\" viewBox=\"0 0 16 16\">\n                                <path d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6\"/>\n                            </svg>\n                        </div>\n                        <p>Arrival</p>\n                    </span> \n                </div>\n            </div>\n            <div class=\"col-3 p-1\">\n                <div id=\"departure_dialog\" role=\"button\" class=\"border p-2 rounded clickable1\">\n                    <span> \n                        <div class=\"d-flex justify-content-between\">\n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Checked-out\" style=\"color:#f69d6d\" id=\"total_departure\">0</h2></span><span><h2 class=\"px-1\" style=\"color:#f69d6d\"> / </h2></span>\n                                <span><h2 title=\"Total Departure\" style=\"color:#f69d6d\" id=\"departure\" >0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-box-arrow-right\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\" d=\"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z\"/>\n                                <path fill-rule=\"evenodd\" d=\"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z\"/>\n                            </svg>\n                        </div>\n                        <p>Departure</p>\n                    </span> \n                </div>\n            </div>\n            <div class=\"col-3 p-1\">\n                <div id=\"stay_over_dialog\" role=\"button\" class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\">\n                            <h2 style=\"color:#42aacf\" id=\"stay_over\">0</h2>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house\" viewBox=\"0 0 16 16\">\n                              <path d=\"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z\"/>\n                            </svg>\n                        </div>\n                        <p>Stay Over</p>\n                    </span> \n                </div>\n            </div>\n            <div class=\"col-3 p-1\">\n                <div id=\"daily_reservation_dialog\" role=\"button\" class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\">\n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Total Reservation\" style=\"color:#f630b4\" id=\"daily_reservation\">0</h2></span><span><h2 style=\"color:#f630b4\" class=\"px-1\"> / </h2></span>\n                                <span><h2 title=\"Total Reservation Stay\" style=\"color:#f630b4\" id=\"daily_reservation_stay\">0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-calendar-check\" viewBox=\"0 0 16 16\">\n                              <path d=\"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z\"/>\n                              <path d=\"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z\"/>\n                            </svg>\n                        </div>\n                        <p>Daily Reservation</p>\n                    </span> \n                </div>\n            </div> \n            <div class=\"col-3 p-1\">\n                <div id=\"fit_arrival_dialog\" role=\"button\" class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\"> \n                            \n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Total FIT (Free Independent Traveler)\" style=\"color:#898ad1\" id=\"fit_arrival_stay\">0</h2></span><span><h2 style=\"color:#898ad1\" class=\"px-1\"> / </h2></span>\n                                <span><h2 title=\"FIT Stay\" style=\"color:#898ad1\" id=\"fit_arrival\">0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-person\" viewBox=\"0 0 16 16\">\n                              <path d=\"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z\"/>\n                            </svg>\n                        </div>\n                        <p>FIT Arrival</p>\n                    </span> \n                </div>\n            </div>\n            <div class=\"col-3 p-1\">\n                <div id=\"git_arrival_dialog\" role=\"button\" class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\"> \n                            \n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Total GIT (Group Inclusive Tour)\" style=\"color:#0b4e7f\" id=\"git_arrival_reservation\" >0</h2></span><span><h2 style=\"color:#0b4e7f\" class=\"px-1\"> / </h2></span>\n                                <span><h2 title=\"GIT Stay\" style=\"color:#0b4e7f\" id=\"git_arrival_stay\">0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-people\" viewBox=\"0 0 16 16\">\n                              <path d=\"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0M6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816M4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4\"/>\n                            </svg>\n                        </div>\n                        <p>GIT Arrival</p>\n                    </span> \n                </div>\n            </div>\n            <div class=\"col-3 p-1\">\n                <div id=\"unassign_room_dialog\" role=\"button\" class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\"> \n                            <div class=\"d-flex\">\n                                <span><h2 title=\"Today Unassign Room\" style=\"color:#ed610b\" id=\"today_unassign_room\">0</h2></span><span><h2 style=\"color:#ed610b\" class=\"px-1\">/</h2></span>\n                                <span><h2 title=\"Total Unassign Room\" style=\"color:#ed610b\" id=\"total_unassign_room\">0</h2></span>\n                            </div>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-unindent\" viewBox=\"0 0 16 16\">\n                              <path fill-rule=\"evenodd\" d=\"M13 8a.5.5 0 0 0-.5-.5H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H12.5A.5.5 0 0 0 13 8\"/>\n                              <path fill-rule=\"evenodd\" d=\"M3.5 4a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5\"/>\n                            </svg>\n                        </div>\n                        <p>Unassign Room</p>\n                    </span> \n                </div>\n            </div>\n            <div id=\"p_and_d_dialog\" role=\"button\" class=\"col-3 p-1\">\n                <div class=\"border p-2 rounded \">\n                    <span> \n                        <div class=\"d-flex justify-content-between\">\n                            <h2 style=\"color:#f79242\" id=\"p_and_d\" >0</h2>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-ev-front\" viewBox=\"0 0 16 16\">\n                              <path d=\"M9.354 4.243a.188.188 0 0 0-.085-.218.186.186 0 0 0-.23.034L6.051 7.246a.188.188 0 0 0 .136.316h1.241l-.673 2.195a.188.188 0 0 0 .085.218c.075.043.17.03.23-.034l2.88-3.187a.188.188 0 0 0-.137-.316H8.572z\"/>\n                              <path d=\"M4.819 2A2.5 2.5 0 0 0 2.52 3.515l-.792 1.848a.807.807 0 0 1-.38.404c-.5.25-.855.715-.965 1.262L.05 8.708a2.5 2.5 0 0 0-.049.49v.413c0 .814.39 1.543 1 1.997V13.5a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1.338c1.292.048 2.745.088 4 .088s2.708-.04 4-.088V13.5a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1.892c.61-.454 1-1.183 1-1.997v-.413c0-.165-.016-.329-.049-.49l-.335-1.68a1.807 1.807 0 0 0-.964-1.261.807.807 0 0 1-.381-.404l-.792-1.848A2.5 2.5 0 0 0 11.181 2H4.82ZM3.44 3.91A1.5 1.5 0 0 1 4.82 3h6.362a1.5 1.5 0 0 1 1.379.91l.792 1.847a1.8 1.8 0 0 0 .853.904c.222.112.381.32.43.564l.336 1.679c.02.097.029.195.029.294v.413a1.48 1.48 0 0 1-1.408 1.484c-1.555.07-3.786.155-5.592.155-1.806 0-4.037-.084-5.592-.155A1.479 1.479 0 0 1 1 9.611v-.413c0-.099.01-.197.03-.294l.335-1.68a.807.807 0 0 1 .43-.563c.383-.19.685-.511.853-.904l.792-1.848Z\"/>\n                            </svg>\n                        </div>\n                        <p>Pick Up/Drop Off</p>\n                    </span> \n                </div>\n            </div>\n        </div>\n    </div> \n</div>\n</div>\n\n</div>\n",
  "modified": "2024-06-22 09:04:12.254850",
  "name": "Summary KPI",
  "private": 0,
  "roles": [],
  "script": "frappe.call(\"edoor.api.frontdesk.get_daily_property_summary\").then((r)=>{\n    \n\n    root_element.querySelector('#arrival').textContent=r.message.arrival || \"0\"\n    root_element.querySelector('#total_arrival').textContent=(r.message.arrival - r.message.arrival_remaining) || \"0\"\n    root_element.querySelector('#departure').textContent=r.message.departure || \"0\"\n    root_element.querySelector('#total_departure').textContent=(r.message.departure - r.message.departure_remaining) || \"0\"\n    root_element.querySelector('#stay_over').textContent=r.message.stay_over || \"0\"\n    root_element.querySelector('#daily_reservation').textContent=r.message.daily_reservation || \"0\"\n    root_element.querySelector('#daily_reservation_stay').textContent=r.message.daily_reservation_stay || \"0\"\n    root_element.querySelector('#fit_arrival').textContent=r.message.fit_stay_arrival || \"0\"\n    root_element.querySelector('#fit_arrival_stay').textContent=r.message.fit_reservation_arrival || \"0\"\n    root_element.querySelector('#git_arrival_reservation').textContent=r.message.git_reservation_arrival || \"0\"\n    root_element.querySelector('#git_arrival_stay').textContent=r.message.git_stay_arrival || \"0\"\n    root_element.querySelector('#today_unassign_room').textContent=r.message.unassign_room || \"0\"\n    root_element.querySelector('#total_unassign_room').textContent=r.message.total_unassign_room || \"0\"\n    root_element.querySelector('#p_and_d').textContent=( r.message.pick_up || \"0\" )  + ' / ' + ( r.message.drop_off || \"0\" ) \n    \n\n    \n    function parseDateString(dateString) {\n    // Assuming dateString is in the format \"YYYY-MM-DD\"\n    const [year, month, day] = dateString.split('-');\n\n    // Convert month from number to month name\n    const months = [\n        'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ];\n    const monthName = months[parseInt(month, 10) - 1];\n\n    const dateObject = new Date(`${monthName} ${day}, ${year}`);\n    \n    // Get the day of the week\n    const daysOfWeek = [\n        'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n    const dayOfWeek = daysOfWeek[dateObject.getDay()];\n    \n    return {\n        day: parseInt(day, 10),\n        month: monthName,\n        year: parseInt(year, 10),\n        dayOfWeek: dayOfWeek\n    };\n}\n\n\nconst parsedDate = parseDateString(r.message.working_date);\n\nroot_element.querySelector('#name_day').textContent=parsedDate.dayOfWeek || \"\"\nroot_element.querySelector('#day').textContent= (parsedDate.day).toString().padStart(2, '0') || \"\"\nroot_element.querySelector('#year').textContent=parsedDate.month + ' ' + parsedDate.year  || \"\"\nvar baseURL = window.location.origin;\nroot_element.querySelector(\"#arrival_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Dashboard%20Arrival%20Guest&&settings=%7B%7D&_lang=en&view=ui&action=view_arrival&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Arrival Guest'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\nroot_element.querySelector(\"#departure_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Dashboard%20Departure%20Guest&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Departure Guest'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n root_element.querySelector(\"#stay_over_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Dashboard%20Stay%20Over%20Guest&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Stay Over Guest'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n root_element.querySelector(\"#daily_reservation_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Dashboard%20Daily%20Reservation&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Daily Reservation'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n\nroot_element.querySelector(\"#fit_arrival_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20FIT%20Arrival%20Guest&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'FIT Arrival'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\nroot_element.querySelector(\"#git_arrival_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20GIT%20Arrival%20Guest&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'GIT Arrival'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n\nroot_element.querySelector(\"#unassign_room_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Unassign%20Room%20Reservation%20List&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Unassign Room'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\nroot_element.querySelector(\"#p_and_d_dialog\").addEventListener(\"click\",function(){\n\n       let msg = frappe.msgprint(\n                `<iframe src=\"${baseURL}/printview?doctype=Business%20Branch&name=${r.message.property}&format=eDoor%20Pickup%20and%20Drop%20Off%20Reservation%20List&&settings=%7B%7D&_lang=en&view=ui&action=view_departure&date=${r.message.working_date}\" frameBorder=\"0\" width=\"100%\" height=\"650\" title=\"Sort Order Account Code\"></iframe>`,\n                \n                'Pickup/Drop Off'\n            );\n            msg.$wrapper.find('.modal-dialog').css(\"max-width\", \"90%\");\n            setTimeout(function(){\n                window.addEventListener('message', myEventHandler);\n                let modal =document.querySelector('.modal')\n                \n                observer.observe(modal, { attributes: true, attributeFilter: ['style'] });    \n            },1000)\n            \n            \n            \n})\n\n\n\n // Create an observer instance\nconst observer = new MutationObserver((mutationsList, observer) => {\n  // Use traditional 'for loops' for IE 11\n  for(const mutation of mutationsList) {\n    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n      const style = mutation.target.getAttribute('style');\n      \n      if (style.includes('display: none')) {\n        window.removeEventListener('message', myEventHandler);\n      }\n    }\n  }\n});\n\n\n\nfunction myEventHandler(event) {\n  if(event.isTrusted && event.data){\n      const data = event.data.split('|')\n      if (data.length==2){\n          \n          if(data[0]==\"view_reservation_detail\"){\n               window.location = \"/frontdesk/reservation-detail/\" + data[1] \n               \n            \n          }else if (data[0] == \"view_reservation_stay_detail\"){\n                            window.location = \"/frontdesk/stay-detail/\" + data[1]\n          }\n          \n      }\n  }\n}\n})\n\n\n\n",
  "style": ".progress-main{\n    margin-top:6px;\n}\n.progress, .progress-bar{\n        border-radius:2px !important;\n    height:2px !important;\n}\n.lh-1 {\n    line-height: 1!important;\n}"
 }
]